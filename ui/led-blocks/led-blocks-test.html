<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Teste dos Blocos LED - BitDogLab</title>
  <script src="../core/blockly_compressed.js"></script>
  <script src="../core/blocks_compressed.js"></script>
  <script src="../core/python_compressed.js"></script>
  <script src="../core/block_definitions.js"></script>
  <script src="../core/generator_stubs.js"></script>
</head>
<body>
  <div id="blocklyDiv" style="height: 480px; width: 600px;"></div>

  <xml xmlns="https://developers.google.com/blockly/xml" id="toolbox" style="display: none">
    <category name="LEDs" colour="#FFBF00">
      <block type="led_red_on"></block>
      <block type="led_green_on"></block>
      <block type="led_blue_on"></block>
      <block type="led_red_off"></block>
      <block type="led_green_off"></block>
      <block type="led_blue_off"></block>
      <block type="led_all_off"></block>
    </category>
  </xml>

  <script>
    // Verificar se os blocos foram registrados
    console.log('Blocos LED registrados:');
    console.log('led_red_on:', typeof Blockly.Blocks['led_red_on']);
    console.log('led_green_on:', typeof Blockly.Blocks['led_green_on']);
    console.log('led_blue_on:', typeof Blockly.Blocks['led_blue_on']);
    
    var workspace = Blockly.inject('blocklyDiv',
        {toolbox: document.getElementById('toolbox')});
    
    // Função para testar a geração de código
    function generateCode() {
      var code = Blockly.Python.workspaceToCode(workspace);
      console.log('Código Python gerado:');
      console.log(code);
      alert('Código Python gerado (veja o console):\n' + code);
    }
    
    // Função para verificar blocos disponíveis
    function checkBlocks() {
      console.log('Todos os blocos registrados:', Object.keys(Blockly.Blocks));
      alert('Veja o console para lista completa de blocos');
    }
    
    // Adicionar botões para testar
    var button1 = document.createElement('button');
    button1.innerText = 'Gerar Código Python';
    button1.onclick = generateCode;
    document.body.appendChild(button1);
    
    var button2 = document.createElement('button');
    button2.innerText = 'Verificar Blocos';
    button2.onclick = checkBlocks;
    button2.style.marginLeft = '10px';
    document.body.appendChild(button2);
  </script>
</body>
</html>